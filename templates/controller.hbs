import { Controller, Inject, Logger } from '@nestjs/common';
import {
Create{{moduleNamePascal}}Dto,
Update{{moduleNamePascal}}Dto,
GetAll{{moduleNamePascal}}Dto,
I{{moduleNamePascal}}Service,
{{moduleNamePascal}},
{{moduleNamePascal}}Topics,
SingleIdDto,
} from '@app/common';
import { MessagePattern, Payload } from '@nestjs/microservices';

@Controller('{{moduleNameKebab}}')
export class {{moduleNamePascal}}Controller {
private readonly logger = new Logger({{moduleNamePascal}}Controller.name);

constructor(
@Inject(I{{moduleNamePascal}}Service)
private {{moduleNameCamel}}Service: I{{moduleNamePascal}}Service,
) {}

@MessagePattern({{moduleNamePascal}}Topics.GET_ALL)
async getAll(@Payload() getAllDto: GetAll{{moduleNamePascal}}Dto) {
return await this.{{moduleNameCamel}}Service.getAll(getAllDto);
}

@MessagePattern({{moduleNamePascal}}Topics.GET_DETAILS)
async getDetails(@Payload() singleIdDto: SingleIdDto) {
return await this.{{moduleNameCamel}}Service.findOneById(singleIdDto.id);
}

@MessagePattern({{moduleNamePascal}}Topics.CREATE)
async create(@Payload() createDto: Create{{moduleNamePascal}}Dto) {
return await this.{{moduleNameCamel}}Service.create({{moduleNamePascal}}, createDto);
}

@MessagePattern({{moduleNamePascal}}Topics.UPDATE)
async update(@Payload() updateDto: Update{{moduleNamePascal}}Dto) {
return await this.{{moduleNameCamel}}Service.update({{moduleNamePascal}}, updateDto);
}

}
